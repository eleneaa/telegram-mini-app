{% include 'index.html' with active='tests' %}
{% block content %}
    <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞: {{ test.label }}</h1>
    <p>–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ {{ score }} –∏–∑ {{ total_questions }} –≤–æ–ø—Ä–æ—Å–æ–≤.</p>

    {% for ans in user_results %}
        <div class="col-md-6 mb-4">
            <div class="card"
                 style="border-radius: 15px;
                         background-color: {% if ans.is_correct %} #BCD0D1 {% else %} #FF747685 {% endif %};
                         border-color: #123030;">
                <div class="card-body"
                     style="background-color: {% if ans.is_correct %} #BCD0D1 {% else %} #FF747685 {% endif %};">
                    <p class="card-title"><strong>{{ ans.question }}</strong></p>

                    <hr>
                    <p class="mt-2">–í–∞—à –æ—Ç–≤–µ—Ç: <strong
                            class="{% if ans.is_correct %}text-success{% else %}text-danger{% endif %}">
                        {{ ans.user_answers }}</strong></p>
                    {% if not ans.is_correct %}
                        <ul>
                            {% for option in ans.correct_answers %}
                                <li class="list-group-item"
                                    style="border-radius: 10px; color: {% if option.text in ans.correct_answers %} #388e3c {% else %} #d32f2f {% endif %};">
                                    <div class="correct-answer-{{ ans.question_number }}"
                                         style="display: none; color: black; padding-top: 10px; font-weight: bold; padding-left: 20px;">
                                        {{ option }}
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                        <button type="button" class="btn btn-link"
                                style="background-color: transparent; border: none; color: black; text-decoration: none;"
                                onclick="toggleAnswerVisibility({{ ans.question_number }})">
                            üèÅ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                        </button>

                    {% endif %}
                </div>
            </div>
        </div>


    {% empty %}

    {% endfor %}
    <script>
        function toggleAnswerVisibility(aa) {
            const answersDiv = document.getElementsByClassName(`correct-answer-${aa}`);
            for (const answerDiv of answersDiv) {
                if (answerDiv.style.display === 'none') {
                    answerDiv.style.display = 'block'; // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                } else {
                    answerDiv.style.display = 'none'; // –°–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                }
            }
        }
    </script>

{% endblock %}